CREATE SEQUENCE SEQ_BOARD;

CREATE TABLE TBL_BOARD(
	BOARD_ID NUMBER CONSTRAINT PK_BOARD PRIMARY KEY,
	BOARD_TITLE VARCHAR2(500) NOT NULL,
	BOARD_CONTENT VARCHAR2(1000) NOT NULL,
	BOARD_REGISTER_DATE DATE DEFAULT SYSDATE,
	BOARD_UPDATE_DATE DATE DEFAULT SYSDATE,
	USER_ID NUMBER NOT NULL,
	CONSTRAINT FK_BOARD_USER FOREIGN KEY(USER_ID) REFERENCES TBL_USER(USER_ID)
	ON DELETE CASCADE
);

DROP TABLE TBL_BOARD;

SELECT * FROM TBL_BOARD ;

SELECT 
FROM TBL_USER u JOIN TBL_BOARD b

ALTER TABLE TBL_BOARD ADD BOARD_LIKE_COUNT NUMBER DEFAULT 0;
ALTER TABLE TBL_BOARD DROP COLUMN BOARD_LIKE_COUNT;

CREATE SEQUENCE SEQ_BOARD_LIKE;

CREATE TABLE TBL_BOARD_LIKE(
	LIKE_ID NUMBER CONSTRAINT PK_LIKE PRIMARY KEY,
	LIKE_DATE DATE DEFAULT SYSDATE,
	USER_ID NUMBER,
	BOARD_ID NUMBER,
	CONSTRAINT FK_LIKE_USER FOREIGN KEY(USER_ID) REFERENCES TBL_USER(USER_ID),
	CONSTRAINT FK_LIKE_FOLLOWER FOREIGN KEY(BOARD_ID) REFERENCES TBL_BOARD(BOARD_ID)
);

SELECT BOARD_ID, BOARD_TITLE, BOARD_CONTENT, BOARD_REGISTER_DATE, BOARD_UPDATE_DATE, USER_ID, BOARD_LIKE_COUNT
FROM TBL_BOARD;

SELECT D1.BOARD_ID, BOARD_TITLE, BOARD_CONTENT, BOARD_REGISTER_DATE, BOARD_UPDATE_DATE, USER_ID, BOARD_LIKE_COUNT 
FROM 
(
	SELECT BOARD_ID
	FROM TBL_USER U JOIN TBL_BOARD_LIKE L 
	ON U.USER_ID = L.USER_ID
) D1 JOIN TBL_BOARD B 
ON B.BOARD_ID = D1.BOARD_ID;








